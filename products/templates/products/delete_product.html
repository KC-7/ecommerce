{% extends 'base.html' %}
{% load static %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

{% block content %}
<div class="overlay"></div>
<div class="container my-5 d-flex justify-content-center align-items-center">
  <div class="row w-75">
    <div class="col-md-8 offset-md-2">
      <div class="alert alert-danger" role="alert">
        Warning! You are about to delete the following product:
      </div>
      <div class="card mb-3 d-flex justify-content-center align-items-center">
        <div class="row">
            <h4 class="logo-font text-black my-4">{{ product.name }}</h4>
        </div>
        <div class="row mb-4">
            {% if product.image %}
                <a href="{% url 'product_detail' product.id %}">
                    <img class="card-img-top img-fluid" src="{{ product.image.url }}" alt="Image for {{ product.name }}">
                </a>
                {% else %}
                <a href="{% url 'product_detail' product.id %}">
                    <img class="card-img-top img-fluid" src="{{ MEDIA_URL }}noimage.png" alt="No image to display for {{ product.name }}">
                </a>
            {% endif %}
        </div>
      </div>
      <form method="POST" action="{% url 'delete_product' product.id %}">
        {% csrf_token %}
        {% if user.is_superuser %}
        <div class="form-group">
          <label for="username">To confirm deletion, please type your username, {{ user.username }}, in the following input box:</label>
          <input type="text" class="form-control" id="username" name="username" required>
        </div>
        <button type="submit" class="btn btn-danger float-left">Delete</button>
        <a href="{% url 'products' %}" class="btn btn-secondary float-right">Cancel</a>
        {% else %}
        <p>You do not have permission to delete this product.</p>
        <a href="{% url 'products' %}" class="btn btn-secondary">Back to Products</a>
        {% endif %}
      </form>
    </div>
  </div>
</div>
{% endblock %}